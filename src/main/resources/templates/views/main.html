<!DOCTYPE html>
<html xmlns:th ="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name = "viewport" content = "width = device-width , initial-scale = 1">
<title>My Treasure Archive</title>
<link th:href="@{/bootstrap/bootstrap.min.css}" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
<script th:src="@{js/jquery-3.7.1.min.js}"></script>
<link th:href="@{/css/main.css}" rel="stylesheet" />
</head>
<body>
<!-- 메인 페이지 -->
<div class="container-fluid px-5">
    <!-- 헤더 -->
    <div class="row justify-content-center my-3">
        <img th:src="@{/upload/mytreasurearchive/logo3.png}" alt="logo" style="width:600px">
    </div>

    <!-- 집전화기 컨테이너 -->
    <div class="phone-container">
        <!-- 화면 영역 (랜덤 이미지) -->
	      <div class="phone-screen" th:if="${randomItem != null}">
			    <img th:src="@{/upload/mytreasurearchive/{file}(file=${randomItem.image})}" alt="random">
			    <div class="phone-clock">
			        <div class="clock-date" th:text="${#temporals.format(randomItem.createdAt, 'yyyy')}">2026</div>
			        <div class="clock-time">
			            <span th:text="${#temporals.format(randomItem.createdAt, 'MM')}">02</span>:<span th:text="${#temporals.format(randomItem.createdAt, 'dd')}">16</span>
			        </div>
			    </div>
			</div>
        <!-- 원형 네비게이션 -->
        <div class="circular-nav">
            <!-- 가운데 ADD 버튼 -->
            <a th:href="@{/addForm}" class="center-btn">Add</a>

            <!-- 위 SONG -->
            <a th:href="@{/items/song}" class="nav-btn top-btn">Song</a>

            <!-- 왼쪽 MOVIE -->
            <a th:href="@{/items/movie}" class="nav-btn left-btn">Movie</a>

            <!-- 오른쪽 BOOK -->
            <a th:href="@{/items/book}" class="nav-btn right-btn">Book</a>

            <!-- 아래 ALL -->
            <a th:href="@{/main}" class="nav-btn bottom-btn">	All</a>
        </div>

        <!-- 키패드 영역 (리스트 출력) -->
        <!-- 키패드 영역 (리스트 출력) -->
<div class="phone-keypad">
    <div class="row">
        <div class="col-4" th:each="item : ${itemList}">
            <div class="card shadow-sm my-3" data-bs-toggle="modal" th:data-bs-target="'#itemModal' + ${item.id}">
                <div class="square-img my-2">
                    <img th:src="@{/upload/mytreasurearchive/{file}(file=${item.image})}" alt="item image" class="card-img-top">
                </div>
            </div>
            
            <!-- 모달 -->
            <div class="modal fade" th:id="'itemModal' + ${item.id}" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" th:text="${item.title}">제목</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <img th:src="@{/upload/mytreasurearchive/{file}(file=${item.image})}" alt="item image" style="width:100%; border-radius:10px; margin-bottom:20px;">
                            <p><strong>카테고리 : </strong> <span th:text="${item.category}">BOOK</span></p>
                            <!-- 노래면 -->
                            <th:block th:if = "${item.category =='song'}">
                            <p><strong>가수 : </strong><span th:text="${item.extra1}">가수</span></p>
							<p><strong>더 알아보기 : </strong> <a th:href="${item.extra2}" target="_blank" class ="text-decoration-none">뮤직 비디오</a></p>                            
							</th:block>
                            <!-- 책이면 -->
                            <th:block th:if = "${item.category =='book'}">
                            <p><strong>작가 : </strong><span th:text="${item.extra1}">작가</span></p>
                            <p><strong>더 알아보기 : </strong> <a th:href="${item.extra2}" target="_blank"  class ="text-decoration-none">구매처</a></p>
                            </th:block>
                            <!-- 영화면 -->
                            <th:block th:if = "${item.category =='movie'}">
                            <p><strong>제작사/감독 : </strong><span th:text="${item.extra1}">제작사/감독</span></p>
							<p><strong>더 알아보기 : </strong> <a th:href="${item.extra2}" target="_blank"  class ="text-decoration-none">보러가기</a></p>                            
							</th:block>
                            <p><strong>생성일 : </strong> <span th:text="${#temporals.format(item.createdAt, 'yyyy.MM.dd')}">2026.02.16</span></p>
                            <p><strong>메모 : </strong></p>
                            <p th:text="${item.reason}">메모 내용</p>
                        </div>
                        <div class="modal-footer">
                            <a th:href="@{/modify/{id}(id=${item.id})}" class="btn btn-secondary">수정</a>
							<a class="btn btn-secondary"
							   th:onclick="'if(confirm(\'정말 삭제하시겠습니까?\')) location.href=\'/delete/' + ${item.id} + '\';'">
							   삭제
							</a>
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- 맨위로 버튼 -->
    <button class="fixed-top-btn" onclick="window.scrollTo({ top: 0, behavior: 'smooth' });">
        <i class="bi bi-arrow-up"></i>
    </button>
</div>
<script th:src="@{bootstrap/bootstrap.bundle.min.js}"></script>
</body>
</html>